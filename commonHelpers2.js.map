{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { fadeItems } from './rerender.js';\nimport { renderExercises } from './renderExercises.js';\nimport { onExerciseStartClick } from './eventHandlers.js';\nimport { getFavoritesData, removeExerciseFromFavorites } from './favoritesStorageHandler.js';\nimport { createPaginationItem } from './renderPagination.js';\n\nlet localData = [];\nconst noCardsTextRef = document.querySelector('.favorites-text');\nconst favoritesListRef = document.querySelector('.practice-list');\nconst paginationElement = document.querySelector('.js-pagination');\n\nfunction splitHandler(arr, widthVP) {\n  const splitter = widthVP < 768 ? 8 : 10;\n  let result = [];\n  for (let i = 0; i < arr.length; i += splitter) {\n    result.push(arr.slice(i, i + splitter));\n  }\n  return result;\n}\n\nfunction onExerciseRemoveClick(e) {\n  const target = e.target.closest('.exercise-remove-btn');\n  if (!target) return;\n  const exerciseID = target.getAttribute('data-exercise-id');\n  if (exerciseID) {\n    removeExerciseFromFavorites(exerciseID);\n    resizerHandler(getFavoritesData());\n  }\n}\n\nfunction itemHandler(arr) {\n  favoritesListRef.innerHTML = renderExercises(arr, true);\n  fadeItems();\n}\n\nfunction updatePagination(pages, currentPage) {\n  paginationElement.innerHTML = '';\n  paginationElement.classList.remove('visually-hidden');\n  pages.forEach((page, index) => {\n    const pageItem = createPaginationItem({\n      pageId: index,\n      content: index + 1,\n      liClassNames: ['pagination-item', currentPage === index ? 'active' : ''],\n    });\n    pageItem.addEventListener('click', () => {\n      itemHandler(page);\n      updatePagination(pages, index);\n      favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n    });\n    paginationElement.appendChild(pageItem);\n  });\n}\n\nfunction resizerHandler(data = localData) {\n  if (!data.length) {\n    noCardsTextRef.classList.remove('visually-hidden');\n    return;\n  } else {\n    noCardsTextRef.classList.add('visually-hidden');\n  }\n\n  const widthVP = window.innerWidth;\n  paginationElement.classList.add('visually-hidden');\n  let itemsPerPage = widthVP < 768 ? 8 : 10;\n\n  if (widthVP >= 1440) {\n    itemsPerPage = 10;\n  }\n\n  if (data.length <= itemsPerPage) {\n    itemHandler(data);\n  } else {\n    const pages = splitHandler(data, widthVP);\n    itemHandler(pages[0]);\n    updatePagination(pages, 0);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  localData = getFavoritesData();\n  // Initial run\n  resizerHandler(localData);\n  const throttledHandleResize = throttle(() => resizerHandler(localData), 50);\n  // Throttle the resizerHandler function\n  window.addEventListener('resize', throttledHandleResize);\n  favoritesListRef.addEventListener('click', onExerciseStartClick);\n  favoritesListRef.addEventListener('click', onExerciseRemoveClick);\n});\n"],"names":["localData","noCardsTextRef","favoritesListRef","paginationElement","splitHandler","arr","widthVP","splitter","result","i","onExerciseRemoveClick","target","exerciseID","removeExerciseFromFavorites","resizerHandler","getFavoritesData","itemHandler","renderExercises","fadeItems","updatePagination","pages","currentPage","page","index","pageItem","createPaginationItem","data","itemsPerPage","throttledHandleResize","throttle","onExerciseStartClick"],"mappings":"8KAOA,IAAIA,EAAY,CAAA,EAChB,MAAMC,EAAiB,SAAS,cAAc,iBAAiB,EACzDC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAoB,SAAS,cAAc,gBAAgB,EAEjE,SAASC,EAAaC,EAAKC,EAAS,CAClC,MAAMC,EAAWD,EAAU,IAAM,EAAI,GACrC,IAAIE,EAAS,CAAA,EACb,QAASC,EAAI,EAAGA,EAAIJ,EAAI,OAAQI,GAAKF,EACnCC,EAAO,KAAKH,EAAI,MAAMI,EAAGA,EAAIF,CAAQ,CAAC,EAExC,OAAOC,CACT,CAEA,SAASE,EAAsB,EAAG,CAChC,MAAMC,EAAS,EAAE,OAAO,QAAQ,sBAAsB,EACtD,GAAI,CAACA,EAAQ,OACb,MAAMC,EAAaD,EAAO,aAAa,kBAAkB,EACrDC,IACFC,EAA4BD,CAAU,EACtCE,EAAeC,EAAgB,CAAE,EAErC,CAEA,SAASC,EAAYX,EAAK,CACxBH,EAAiB,UAAYe,EAAgBZ,EAAK,EAAI,EACtDa,GACF,CAEA,SAASC,EAAiBC,EAAOC,EAAa,CAC5ClB,EAAkB,UAAY,GAC9BA,EAAkB,UAAU,OAAO,iBAAiB,EACpDiB,EAAM,QAAQ,CAACE,EAAMC,IAAU,CAC7B,MAAMC,EAAWC,EAAqB,CACpC,OAAQF,EACR,QAASA,EAAQ,EACjB,aAAc,CAAC,kBAAmBF,IAAgBE,EAAQ,SAAW,EAAE,CAC7E,CAAK,EACDC,EAAS,iBAAiB,QAAS,IAAM,CACvCR,EAAYM,CAAI,EAChBH,EAAiBC,EAAOG,CAAK,EAC7BrB,EAAiB,eAAe,CAAE,SAAU,QAAU,CAAA,CAC5D,CAAK,EACDC,EAAkB,YAAYqB,CAAQ,CAC1C,CAAG,CACH,CAEA,SAASV,EAAeY,EAAO1B,EAAW,CACxC,GAAK0B,EAAK,OAIRzB,EAAe,UAAU,IAAI,iBAAiB,MAJ9B,CAChBA,EAAe,UAAU,OAAO,iBAAiB,EACjD,MACJ,CAIE,MAAMK,EAAU,OAAO,WACvBH,EAAkB,UAAU,IAAI,iBAAiB,EACjD,IAAIwB,EAAerB,EAAU,IAAM,EAAI,GAMvC,GAJIA,GAAW,OACbqB,EAAe,IAGbD,EAAK,QAAUC,EACjBX,EAAYU,CAAI,MACX,CACL,MAAMN,EAAQhB,EAAasB,EAAMpB,CAAO,EACxCU,EAAYI,EAAM,CAAC,CAAC,EACpBD,EAAiBC,EAAO,CAAC,CAC1B,CACH,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDpB,EAAYe,EAAgB,EAE5BD,EAAed,CAAS,EACxB,MAAM4B,EAAwBC,EAAS,IAAMf,EAAed,CAAS,EAAG,EAAE,EAE1E,OAAO,iBAAiB,SAAU4B,CAAqB,EACvD1B,EAAiB,iBAAiB,QAAS4B,CAAoB,EAC/D5B,EAAiB,iBAAiB,QAASQ,CAAqB,CAClE,CAAC"}