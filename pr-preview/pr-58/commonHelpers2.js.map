{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { fadeItems } from './rerender.js';\nimport { renderExercises } from './renderExercises.js';\nimport { onExerciseStartClick } from './eventHandlers.js';\nimport { getFavoritesData, removeExerciseFromFavorites } from './favoritesStorageHandler.js';\n\nlet localData = [];\nconst noCardsTextRef = document.querySelector('.favorites-text');\nconst favoritesListRef = document.querySelector('.practice-list');\nconst favoritesPaginationRef = document.querySelector('.favorites-pagination');\n\nfunction splitHandler(arr, widthVP) {\n  const splitter = widthVP < 768 ? 8 : 10;\n\n  let result = [];\n  if (arr.length <= splitter) {\n    return arr;\n  } else {\n    for (let i = 0; i < arr.length; i += splitter) {\n      let chunk = arr.slice(i, i + splitter);\n      result.push(chunk);\n    }\n    return result;\n  }\n}\n\n\n\nfunction onExerciseRemoveClick(e) {\n  const target = e.target.closest('.exercise-remove-btn');\n  if (!target) return;\n  const exerciseID = target.getAttribute('data-exercise-id');\n  if (exerciseID) {\n    removeExerciseFromFavorites(exerciseID);\n    resizerHandler(getFavoritesData());\n  }\n}\n\nfunction itemHandler(arr) {\n  favoritesListRef.innerHTML = renderExercises(arr, true);\n  fadeItems();\n}\n\nfunction resizerHandler(data = localData) {\n  if (!data.length) {\n    noCardsTextRef.classList.remove('visually-hidden');\n  }\n  const widthVP = window.innerWidth;\n  favoritesPaginationRef.classList.add('visually-hidden');\n\n  if (widthVP >= 1440) {\n    itemHandler(data);\n  } else if (widthVP >= 768 && widthVP < 1440) {\n    if (data.length <= 10) {\n      itemHandler(data);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(data, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        pageItem.addEventListener('click', () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  } else {\n    if (data.length <= 8) {\n      itemHandler(data);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(data, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        const bindList = () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        };\n\n        pageItem.addEventListener('click', e => {\n          bindList();\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  localData =getFavoritesData();\n  // Initial run\n  resizerHandler(localData);\n  const throttledHandleResize = throttle(resizerHandler, 50);\n  // Throttle the resizerHandler function\n  window.addEventListener('resize', throttledHandleResize);\n  favoritesListRef.addEventListener('click', onExerciseStartClick);\n  favoritesListRef.addEventListener('click', onExerciseRemoveClick);\n});\n"],"names":["localData","noCardsTextRef","favoritesListRef","favoritesPaginationRef","splitHandler","arr","widthVP","splitter","result","i","chunk","onExerciseRemoveClick","target","exerciseID","removeExerciseFromFavorites","resizerHandler","getFavoritesData","itemHandler","renderExercises","fadeItems","data","pages","pageItem","currentData","bindList","e","throttledHandleResize","throttle","onExerciseStartClick"],"mappings":"4KAMA,IAAIA,EAAY,CAAA,EAChB,MAAMC,EAAiB,SAAS,cAAc,iBAAiB,EACzDC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAyB,SAAS,cAAc,uBAAuB,EAE7E,SAASC,EAAaC,EAAKC,EAAS,CAClC,MAAMC,EAAWD,EAAU,IAAM,EAAI,GAErC,IAAIE,EAAS,CAAA,EACb,GAAIH,EAAI,QAAUE,EAChB,OAAOF,EAEP,QAASI,EAAI,EAAGA,EAAIJ,EAAI,OAAQI,GAAKF,EAAU,CAC7C,IAAIG,EAAQL,EAAI,MAAMI,EAAGA,EAAIF,CAAQ,EACrCC,EAAO,KAAKE,CAAK,CAClB,CACD,OAAOF,CAEX,CAIA,SAASG,EAAsB,EAAG,CAChC,MAAMC,EAAS,EAAE,OAAO,QAAQ,sBAAsB,EACtD,GAAI,CAACA,EAAQ,OACb,MAAMC,EAAaD,EAAO,aAAa,kBAAkB,EACrDC,IACFC,EAA4BD,CAAU,EACtCE,EAAeC,EAAgB,CAAE,EAErC,CAEA,SAASC,EAAYZ,EAAK,CACxBH,EAAiB,UAAYgB,EAAgBb,EAAK,EAAI,EACtDc,GACF,CAEA,SAASJ,EAAeK,EAAOpB,EAAW,CACnCoB,EAAK,QACRnB,EAAe,UAAU,OAAO,iBAAiB,EAEnD,MAAMK,EAAU,OAAO,WAGvB,GAFAH,EAAuB,UAAU,IAAI,iBAAiB,EAElDG,GAAW,KACbW,EAAYG,CAAI,UACPd,GAAW,KAAOA,EAAU,KACrC,GAAIc,EAAK,QAAU,GACjBH,EAAYG,CAAI,MACX,CACLjB,EAAuB,UAAY,GACnCA,EAAuB,UAAU,OAAO,iBAAiB,EACzD,MAAMiB,EAAOhB,EAAagB,EAAMd,CAAO,EACvCW,EAAYG,EAAK,CAAC,CAAC,EAEnB,IAAIC,EAAQ,CAAA,EACRZ,EAAI,EACRW,EAAK,QAAQ,IAAM,CACjB,MAAME,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,gBAAgB,EACvCA,EAAS,YAAcb,EACvB,MAAMc,EAAcH,EAAKX,EAAI,CAAC,EAC9Ba,EAAS,iBAAiB,QAAS,IAAM,CACvCL,EAAYM,CAAW,EACvBrB,EAAiB,eAAe,CAAE,SAAU,QAAU,CAAA,CAChE,CAAS,EACDmB,EAAM,KAAKC,CAAQ,EACnBb,GAAK,CACb,CAAO,EACDN,EAAuB,OAAO,GAAGkB,CAAK,CACvC,SAEGD,EAAK,QAAU,EACjBH,EAAYG,CAAI,MACX,CACLjB,EAAuB,UAAY,GACnCA,EAAuB,UAAU,OAAO,iBAAiB,EACzD,MAAMiB,EAAOhB,EAAagB,EAAMd,CAAO,EACvCW,EAAYG,EAAK,CAAC,CAAC,EAEnB,IAAIC,EAAQ,CAAA,EACRZ,EAAI,EACRW,EAAK,QAAQ,IAAM,CACjB,MAAME,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,gBAAgB,EACvCA,EAAS,YAAcb,EACvB,MAAMc,EAAcH,EAAKX,EAAI,CAAC,EACxBe,EAAW,IAAM,CACrBP,EAAYM,CAAW,EACvBrB,EAAiB,eAAe,CAAE,SAAU,QAAU,CAAA,CAChE,EAEQoB,EAAS,iBAAiB,QAASG,GAAK,CACtCD,GACV,CAAS,EACDH,EAAM,KAAKC,CAAQ,EACnBb,GAAK,CACb,CAAO,EACDN,EAAuB,OAAO,GAAGkB,CAAK,CACvC,CAEL,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDrB,EAAWgB,EAAgB,EAE3BD,EAAef,CAAS,EACxB,MAAM0B,EAAwBC,EAASZ,EAAgB,EAAE,EAEzD,OAAO,iBAAiB,SAAUW,CAAqB,EACvDxB,EAAiB,iBAAiB,QAAS0B,CAAoB,EAC/D1B,EAAiB,iBAAiB,QAASS,CAAqB,CAClE,CAAC"}