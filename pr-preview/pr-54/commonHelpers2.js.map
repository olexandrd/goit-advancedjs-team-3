{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\n// 1. Retrieve the data from localStorage\nconst retrievedData = localStorage.getItem('favorites');\n// 2. Convert the retrieved data back to an array\nconst localData = JSON.parse(retrievedData) || [];\nconst noCardsTextRef = document.querySelector('.favorites-text');\nconst favoritesListRef = document.querySelector('.practice-list');\nconst favoritesPaginationRef = document.querySelector('.favorites-pagination');\n\nif (!localData.length) {\n  noCardsTextRef.classList.remove('visually-hidden');\n  favoritesListRef.classList.add('visually-hidden');\n}\n\nfunction splitHandler(arr, widthVP) {\n  const splitter = widthVP < 768 ? 8 : 10;\n\n  let result = [];\n  if (arr.length <= splitter) {\n    return arr;\n  } else {\n    for (let i = 0; i < arr.length; i += splitter) {\n      let chunk = arr.slice(i, i + splitter);\n      result.push(chunk);\n    }\n    return result;\n  }\n}\nconst capitalizeFirstLetter = string => {\n  if (!string) {\n    return string;\n  }\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\nfunction itemHandler(arr) {\n  const markup = arr\n    .map(\n      ({ _id, name, rating, bodyPart, burnedCalories, target, time }) =>\n        `<li class=\"exercise-card\">\n          <div class=\"exercise-card-top\">\n            <div class=\"exercise-card-top-info\">\n              <h3 class=\"exercise-general-header\">Workout</h3>\n              <p class=\"exercise-rating\">${rating}<svg class=\"exercise-rating-icon\">\n                  <use href=\"./images/icons.svg#icon-star\"></use>\n                </svg>\n              </p> \n            </div>\n            <button class=\"exercise-start-btn\" data-exercise-id=\"${_id}\" type=\"button\">\n              Start<svg class=\"exercise-start-icon\">\n                <use href=\"./images/icons.svg#icon-start-arrow\"></use>\n              </svg>\n            </button>\n          </div>\n          <div class=\"exercise-card-bottom\">\n            <div class=\"exercise-card-title\">\n              <svg class=\"exercise-card-icon\">\n                <use href=\"./images/icons.svg#icon-run\"></use>\n              </svg>\n              <p class=\"exercise-card-title-text\">${capitalizeFirstLetter(name)}</p>\n            </div>\n            <div class=\"exercise-card-info\"> \n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Burned calories:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${burnedCalories} / ${time} min</div>\n              </div>\n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Body part:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${bodyPart}</div>\n              </div>\n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Target:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${target}</div>\n              </div>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n\n  favoritesListRef.innerHTML = markup;\n}\n\nfunction resizerHandler() {\n  const widthVP = window.innerWidth;\n  favoritesPaginationRef.classList.add('visually-hidden');\n\n  if (widthVP >= 1440) {\n    itemHandler(localData);\n  } else if (widthVP >= 768 && widthVP < 1440) {\n    if (localData.length <= 10) {\n      itemHandler(localData);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(localData, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        pageItem.addEventListener('click', () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  } else {\n    if (localData.length <= 8) {\n      itemHandler(localData);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(localData, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        const bindList = () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        };\n\n        pageItem.addEventListener('click', e => {\n          bindList();\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  }\n}\n\n// Initial run\nresizerHandler();\n\n// Throttle the resizerHandler function\nconst throttledHandleResize = throttle(resizerHandler, 50);\nwindow.addEventListener('resize', throttledHandleResize);\n"],"names":["retrievedData","localData","noCardsTextRef","favoritesListRef","favoritesPaginationRef","splitHandler","arr","widthVP","splitter","result","i","chunk","capitalizeFirstLetter","string","itemHandler","markup","_id","name","rating","bodyPart","burnedCalories","target","time","resizerHandler","data","pages","pageItem","currentData","bindList","e","throttledHandleResize","throttle"],"mappings":"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"}