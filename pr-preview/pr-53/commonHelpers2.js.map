{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { fadeItems } from './rerender.js';\nimport { renderExercises } from './renderExercises.js';\nimport { onExerciseStartClick } from './eventHandlers.js';\nimport iziToast from 'izitoast';\n\nlet localData = [];\nconst noCardsTextRef = document.querySelector('.favorites-text');\nconst favoritesListRef = document.querySelector('.practice-list');\nconst favoritesPaginationRef = document.querySelector('.favorites-pagination');\nconst headerDtRef = document.querySelector('.exercise-header-dt');\nconst headerRef = document.querySelector('.exercise-header');\n\n\nfunction splitHandler(arr, widthVP) {\n  const splitter = widthVP < 768 ? 8 : 10;\n\n  let result = [];\n  if (arr.length <= splitter) {\n    return arr;\n  } else {\n    for (let i = 0; i < arr.length; i += splitter) {\n      let chunk = arr.slice(i, i + splitter);\n      result.push(chunk);\n    }\n    return result;\n  }\n}\n\nexport function removeExerciseFromFavorites(exerciseID) {\n  const exercise = localData.find(e => e._id === exerciseID);\n  if (!exercise) return;\n  const updatedFavorites = localData.filter(favorite => favorite._id !== exerciseID);\n  localData = updatedFavorites;\n  localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n  iziToast.success({\n    message: `Exercise ${exercise.name} removed from favorites!`,\n  });\n  resizerHandler(updatedFavorites);\n}\n\nfunction onExerciseRemoveClick(e) {\n  const target = e.target.closest('.exercise-remove-btn');\n  if (!target) return;\n  const exerciseID = target.getAttribute('data-exercise-id');\n  if (exerciseID) {\n    removeExerciseFromFavorites(exerciseID);\n  }\n}\n\nfunction itemHandler(arr) {\n  favoritesListRef.innerHTML = renderExercises(arr, true);\n  fadeItems();\n}\n\nfunction resizerHandler(data = localData) {\n  if (!data.length) {\n    noCardsTextRef.classList.remove('visually-hidden');\n  }\n  const widthVP = window.innerWidth;\n  favoritesPaginationRef.classList.add('visually-hidden');\n\n  if (widthVP >= 1440) {\n    headerDtRef.classList.remove('visually-hidden');\n    headerRef.classList.add('visually-hidden');\n    itemHandler(data);\n  } else if (widthVP >= 768 && widthVP < 1440) {\n    headerDtRef.classList.add('visually-hidden');\n    headerRef.classList.remove('visually-hidden');\n    if (data.length <= 10) {\n      itemHandler(data);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(data, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        pageItem.addEventListener('click', () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  } else {\n    headerDtRef.classList.add('visually-hidden');\n    headerRef.classList.remove('visually-hidden');\n    if (data.length <= 8) {\n      itemHandler(data);\n    } else {\n      favoritesPaginationRef.innerHTML = '';\n      favoritesPaginationRef.classList.remove('visually-hidden');\n      const data = splitHandler(data, widthVP);\n      itemHandler(data[0]);\n\n      let pages = [];\n      let i = 1;\n      data.forEach(() => {\n        const pageItem = document.createElement('li');\n        pageItem.classList.add('favorites-page');\n        pageItem.textContent = i;\n        const currentData = data[i - 1];\n        const bindList = () => {\n          itemHandler(currentData);\n          favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n        };\n\n        pageItem.addEventListener('click', e => {\n          bindList();\n        });\n        pages.push(pageItem);\n        i += 1;\n      });\n      favoritesPaginationRef.append(...pages);\n    }\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // 1. Retrieve the data from localStorage\n  const retrievedData = localStorage.getItem('favorites');\n  // 2. Convert the retrieved data back to an array\n  localData = JSON.parse(retrievedData) || [];\n  // Initial run\n  resizerHandler(localData);\n  const throttledHandleResize = throttle(resizerHandler, 50);\n  // Throttle the resizerHandler function\n  window.addEventListener('resize', throttledHandleResize);\n  favoritesListRef.addEventListener('click', onExerciseStartClick);\n  favoritesListRef.addEventListener('click', onExerciseRemoveClick);\n});\n"],"names":["localData","noCardsTextRef","favoritesListRef","favoritesPaginationRef","headerDtRef","headerRef","splitHandler","arr","widthVP","splitter","result","i","chunk","removeExerciseFromFavorites","exerciseID","exercise","e","updatedFavorites","favorite","iziToast","resizerHandler","onExerciseRemoveClick","target","itemHandler","renderExercises","fadeItems","data","pages","pageItem","currentData","bindList","retrievedData","throttledHandleResize","throttle","onExerciseStartClick"],"mappings":"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"}