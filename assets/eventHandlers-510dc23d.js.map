{"version":3,"file":"eventHandlers-510dc23d.js","sources":["../../src/js/constants.js","../../src/js/services.js","../../src/js/renderCategories.js","../../src/js/renderPagination.js","../../src/js/renderExercises.js","../../src/js/rerender.js","../../src/js/header.js","../../src/js/exercisePopUpMarkup.js","../../src/js/favoritesStorageHandler.js","../../src/js/favorites.js","../../src/js/exercisePopUp.js","../../src/js/eventHandlers.js"],"sourcesContent":["const BASE_URL = 'https://your-energy.b.goit.study/api/';\n\nconst refs = {\n  list: document.querySelector('.js-filtered-list'),\n  filter: document.querySelector('.js-filters'),\n  pagination: document.querySelector('.js-pagination'),\n  exerciseHeaderSpan: document.querySelector('.js-exercise-header-span'),\n  exerciseHeader: document.querySelector('.js-exercise-header'),\n  searchForm: document.querySelector('.search-form'),\n  searchInput: document.querySelector('.search-input'),\n  searchInputCrossIcon: document.querySelector('.search-input-icon.cross-icon'),\n  searchInputSearchIcon: document.querySelector(\n    '.search-input-icon.search-icon'\n  ),\n  exercisePopUpBackdrop: document.querySelector('.exercise-pop-up-backdrop'),\n  exercisePopUpContent: document.querySelector('.exercise-pop-up-content'),\n  exercisePopUpCloseBtn: document.querySelector('.exercise-pop-up-close-btn'),\n  exercisesContainer: document.querySelector('.exercises-container'),\n  body: document.querySelector('body'),\n  scrollUpButton: document.querySelector('.scroll-up-button'),\n  mainSection: document.querySelector('.main-section'),\n  ratingPopUpBackdrop: document.querySelector('.js-rating-pop-up-backdrop'),\n  ratingPopUpContent: document.querySelector('.rating-pop-up-content'),\n  ratingPopUpCloseBtn: document.querySelector('.js-close-rating-pop-up'),\n  ratingForm: document.querySelector('.form-rating'),\n};\n\nconst FILTERS = {\n  MUSCLES: 'Muscles',\n  BODY_PARTS: 'Body parts',\n  EQUIPMENT: 'Equipment',\n};\n\nconst queryParamsFilters = new URLSearchParams({\n  filter: FILTERS.MUSCLES,\n  page: 1,\n  limit: window.matchMedia('(min-width: 768px)').matches ? 12 : 9,\n});\n\nconst queryParamsExercises = new URLSearchParams({\n  page: 1,\n  limit: window.matchMedia('(min-width: 768px)').matches ? 10 : 8,\n});\n\nconst dataOptions = {\n  page: 1,\n  totalPages: 0,\n};\n\nexport {\n  BASE_URL,\n  FILTERS,\n  queryParamsFilters,\n  queryParamsExercises,\n  refs,\n  dataOptions,\n};\n","import {\n  BASE_URL,\n  queryParamsFilters,\n  queryParamsExercises,\n} from './constants';\n\nconst requestOptionsGET = {\n  method: 'GET',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n};\n\n// Exercises\n\nexport async function serviceGetExercises() {\n  const res = await fetch(\n    `${BASE_URL}exercises?${queryParamsExercises}`,\n    requestOptionsGET\n  );\n  if (!res.ok) {\n    throw new Error(`Ooops, status code: ${res.status}`);\n  }\n  return await res.json();\n}\n\n// NOTE: in case the mail has already did a review it can not be reused\n// you will get error message in response in format: {message: \"Such email already exists\"}\n// it should be handled in the catch() with toast message\nexport async function servicePatchExercisesByIdRating(\n  id,\n  { rate, email, review }\n) {\n  const requestOptionsPatch = {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ rate, email, review }),\n  };\n\n  const res = await fetch(\n    `${BASE_URL}exercises/${id}/rating`,\n    requestOptionsPatch\n  );\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(data.message || 'Failed to set a rating');\n  }\n  return data;\n}\n\nexport async function serviceGetExercisesById(id) {\n  const res = await fetch(`${BASE_URL}exercises/${id}`, requestOptionsGET);\n  if (!res.ok) {\n    throw new Error(`Ooops, status code: ${res.status}`);\n  }\n  return await res.json();\n}\n\n// Filters\n\nexport async function serviceGetFilters() {\n  const res = await fetch(\n    `${BASE_URL}filters?${queryParamsFilters}`,\n    requestOptionsGET\n  );\n  if (!res.ok) {\n    throw new Error(`Ooops, status code: ${res.status}`);\n  }\n  return await res.json();\n}\n\n// Quotes\nexport async function serviceGetQuote() {\n  const res = await fetch(`${BASE_URL}quote`, requestOptionsGET);\n  if (!res.ok) {\n    throw new Error(`Ooops, status code: ${res.status}`);\n  }\n  return await res.json();\n}\n\n// Subscriptions\nexport async function servicePostSubscription(email) {\n  const requestOptionsPost = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email }),\n  };\n\n  const res = await fetch(`${BASE_URL}subscription`, requestOptionsPost);\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(data.message || 'Failed to subscribe');\n  }\n  return data;\n}\n","import { refs } from './constants';\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function renderCategories(arr) {\n  const markup = arr\n    .map(\n      ({ filter, name, imgURL }) =>\n        `<li class=\"category-card fade-item\" data-filter=\"${filter}\" data-name=\"${name}\">\n            <img\n              src=\"${imgURL}\"\n              alt=\"${name}\"\n              class=\"category-card-img\"\n              width=\"80\"\n              height=\"80\"\n            />\n            <div class=\"category-card-content\">\n            <p class=\"category-card-title\">${capitalizeFirstLetter(name)}</p> \n            <h3 class=\"category-card-text\">${capitalizeFirstLetter(filter)}</h3>\n            </div>\n        </li>`\n    )\n    .join('');\n\n  refs.list.innerHTML = markup;\n}\n","import { refs } from './constants';\n\nfunction getArrowLeft(className) {\n  return `<svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 20 20\"\n                fill=\"none\"\n                class=\"arrow-icon ${className ?? ''}\"\n              >\n                <path\n                  d=\"M8.83289 10.5917C8.75478 10.5142 8.69279 10.4221 8.65048 10.3205C8.60817 10.219 8.58639 10.11 8.58639 10C8.58639 9.89001 8.60817 9.78109 8.65048 9.67954C8.69279 9.57799 8.75478 9.48582 8.83289 9.40835L12.6579 5.59168C12.736 5.51421 12.798 5.42204 12.8403 5.32049C12.8826 5.21894 12.9044 5.11002 12.9044 5.00001C12.9044 4.89 12.8826 4.78108 12.8403 4.67953C12.798 4.57798 12.736 4.48581 12.6579 4.40834C12.5018 4.25313 12.2905 4.16602 12.0704 4.16602C11.8502 4.16602 11.639 4.25313 11.4829 4.40834L7.65789 8.23335C7.18972 8.7021 6.92676 9.33752 6.92676 10C6.92676 10.6625 7.18972 11.2979 7.65789 11.7667L11.4829 15.5917C11.6381 15.7457 11.8476 15.8324 12.0662 15.8334C12.1759 15.834 12.2846 15.813 12.3861 15.7715C12.4877 15.73 12.58 15.6689 12.6579 15.5917C12.736 15.5142 12.798 15.4221 12.8403 15.3205C12.8826 15.219 12.9044 15.11 12.9044 15C12.9044 14.89 12.8826 14.7811 12.8403 14.6795C12.798 14.578 12.736 14.4858 12.6579 14.4084L8.83289 10.5917Z\"\n                  fill=\"#242424\"\n                />\n              </svg>`;\n}\n\nfunction getRightArrow(className) {\n  return `<svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 20 20\"\n                fill=\"none\"\n                class=\"arrow-icon ${className ?? ''}\"\n              >\n                <path\n                  d=\"M11.1671 10.5917C11.2452 10.5142 11.3072 10.4221 11.3495 10.3205C11.3918 10.219 11.4136 10.11 11.4136 10C11.4136 9.89001 11.3918 9.78109 11.3495 9.67954C11.3072 9.57799 11.2452 9.48582 11.1671 9.40835L7.34211 5.59168C7.264 5.51421 7.20201 5.42204 7.1597 5.32049C7.11739 5.21894 7.09561 5.11002 7.09561 5.00001C7.09561 4.89 7.11739 4.78108 7.1597 4.67953C7.20201 4.57798 7.264 4.48581 7.34211 4.40834C7.49824 4.25313 7.70945 4.16602 7.92961 4.16602C8.14976 4.16602 8.36097 4.25313 8.51711 4.40834L12.3421 8.23335C12.8103 8.7021 13.0732 9.33752 13.0732 10C13.0732 10.6625 12.8103 11.2979 12.3421 11.7667L8.51711 15.5917C8.36189 15.7457 8.15239 15.8324 7.93377 15.8334C7.8241 15.834 7.71538 15.813 7.61385 15.7715C7.51232 15.73 7.41997 15.6689 7.34211 15.5917C7.264 15.5142 7.20201 15.4221 7.1597 15.3205C7.11739 15.219 7.09561 15.11 7.09561 15C7.09561 14.89 7.11739 14.7811 7.1597 14.6795C7.20201 14.578 7.264 14.4858 7.34211 14.4084L11.1671 10.5917Z\"\n                  fill=\"#242424\"\n                />\n              </svg>`;\n}\n\nexport function createPaginationItem({ pageId, content, liClassNames }) {\n  const li = document.createElement('li');\n  const a = document.createElement('a');\n\n  a.classList.add('pagination-link');\n  a.onclick = event => {\n    event.preventDefault();\n  };\n  a.href = '#';\n  a.innerHTML = content;\n\n  li.classList.add(...liClassNames.filter(Boolean));\n  li.dataset.id = pageId;\n  li.appendChild(a);\n\n  return li;\n}\n\nexport function renderPagination(totalPages, currentPage) {\n  const fragment = document.createDocumentFragment();\n  const tempArray = Array(totalPages).fill(0);\n\n  if (totalPages > 9) {\n    const goToFirstPageItem = createPaginationItem({\n      pageId: 1,\n      content: `${getArrowLeft('first')}${getArrowLeft('first')}`,\n      liClassNames: [\n        'pagination-arrow',\n        'go-to-first',\n        currentPage === 1 ? 'disabled' : '',\n      ],\n    });\n    fragment.appendChild(goToFirstPageItem);\n\n    const goToPrevPageItem = createPaginationItem({\n      pageId: currentPage - 1 < 1 ? 1 : currentPage - 1,\n      content: getArrowLeft(),\n      liClassNames: [\n        'pagination-arrow',\n        'go-to-prev',\n        currentPage === 1 ? 'disabled' : '',\n      ],\n    });\n    fragment.appendChild(goToPrevPageItem);\n\n    let start = currentPage - 1 < 1 ? 1 : currentPage - 1;\n    let end = currentPage + 1 > totalPages ? totalPages : currentPage + 1;\n    if (end - start < 2) {\n      if (start === 1) {\n        end = start + 2;\n      } else {\n        start = end - 2;\n      }\n    }\n\n    if (start !== 1) {\n      const li = createPaginationItem({\n        pageId: -1,\n        content: '...',\n        liClassNames: ['pagination-item', 'three-dots'],\n      });\n      fragment.appendChild(li);\n    }\n\n    tempArray.slice(start - 1, end).map((_, i) => {\n      const li = createPaginationItem({\n        pageId: start + i,\n        content: start + i,\n        liClassNames: [\n          'pagination-item',\n          currentPage === start + i ? 'active' : '',\n        ],\n      });\n      fragment.appendChild(li);\n    });\n\n    if (end !== totalPages) {\n      const li = createPaginationItem({\n        pageId: -1,\n        content: '...',\n        liClassNames: ['pagination-item', 'three-dots'],\n      });\n      fragment.appendChild(li);\n    }\n\n    const goToNextPageItem = createPaginationItem({\n      pageId: currentPage + 1 > totalPages ? totalPages : currentPage + 1,\n      content: getRightArrow(),\n      liClassNames: [\n        'pagination-arrow',\n        'go-to-next',\n        currentPage === totalPages ? 'disabled' : '',\n      ],\n    });\n    fragment.appendChild(goToNextPageItem);\n\n    const goToLastPageItem = createPaginationItem({\n      pageId: totalPages,\n      content: `${getRightArrow('last')}${getRightArrow('last')}`,\n      liClassNames: [\n        'pagination-arrow',\n        'go-to-last',\n        currentPage === totalPages ? 'disabled' : '',\n      ],\n    });\n    fragment.appendChild(goToLastPageItem);\n  } else {\n    tempArray.map((_, i) => {\n      const li = createPaginationItem({\n        pageId: i + 1,\n        content: i + 1,\n        liClassNames: [\n          'pagination-item',\n          currentPage === i + 1 ? 'active' : '',\n        ],\n      });\n      fragment.appendChild(li);\n    });\n  }\n\n  refs.pagination.innerHTML = '';\n  refs.pagination.appendChild(fragment);\n}\n","const capitalizeFirstLetter = string => {\n  if (!string) {\n    return string;\n  }\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\nexport function renderExercises(arr, isFavorites = false) {\n  return arr\n    .map(({ _id, name, rating, bodyPart, burnedCalories, target, time }) => {\n      const icon = isFavorites\n        ? `<button class=\"exercise-card-btn exercise-remove-btn\" data-exercise-id=\"${_id}\" type=\"button\">\n             <svg class=\"exercise-card-icon-garbage\">\n               <use href=\"./images/icons.svg#icon-trash\">\n              </use>\n             </svg>\n          </button>`\n        : `<p class=\"exercise-rating\">${Number.isInteger(rating) ? rating.toFixed(1) : rating}\n                  <svg class=\"exercise-rating-icon\">\n                    <use href=\"./images/icons.svg#icon-star\"></use>\n                  </svg>\n                </p>`;\n      return `<li class=\"exercise-card fade-item\">\n          <div class=\"exercise-card-top\">\n            <div class=\"exercise-card-top-info\">\n              <h3 class=\"exercise-general-header\">Workout</h3>\n              ${icon}\n            </div>\n            <button class=\"exercise-card-btn exercise-start-btn\" data-exercise-id=\"${_id}\" type=\"button\">\n              Start<svg class=\"exercise-start-icon\">\n                <use href=\"./images/icons.svg#icon-start-arrow\"></use>\n              </svg>\n            </button>\n          </div>\n          <div class=\"exercise-card-bottom\">\n            <div class=\"exercise-card-title\">\n              <svg class=\"exercise-card-icon\">\n                <use href=\"./images/icons.svg#icon-run\"></use>\n              </svg>\n              <p class=\"exercise-card-title-text\">${capitalizeFirstLetter(name)}</p>\n            </div>\n            <div class=\"exercise-card-info\">\n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Burned calories:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${burnedCalories} / ${time} min</div>\n              </div>\n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Body part:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${bodyPart}</div>\n              </div>\n              <div class=\"exercise-card-info-element\">\n                <div class=\"exercise-card-info-element-heading\">Target:</div>\n                <div class=\"exercise-card-info-element-content-target-no-overflow\">${target}</div>\n              </div>\n            </div>\n          </div>\n        </li>`;\n    })\n    .join('');\n}\n","import { dataOptions, refs } from './constants';\nimport { serviceGetExercises, serviceGetFilters } from './services';\nimport { renderCategories } from './renderCategories';\nimport { renderPagination } from './renderPagination';\nimport { renderExercises } from './renderExercises';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function fadeItems() {\n  const items = document.getElementsByClassName('fade-item');\n\n  for (let i = 0; i < items.length; ++i) {\n    fadeIn(items[i], i * 100);\n  }\n  function fadeIn(item, delay) {\n    setTimeout(() => {\n      item.classList.add('fadein');\n    }, delay);\n  }\n}\n\nfunction rerender() {\n  serviceGetFilters()\n    .then(data => {\n      dataOptions.totalPages = data.totalPages;\n      renderCategories(data.results);\n      renderPagination(data.totalPages, Number(data.page));\n      fadeItems();\n    })\n    .catch(error => {\n      iziToast.error({\n        message: `${error}`,\n      });\n    });\n}\n\nfunction rerenderExercises() {\n  serviceGetExercises()\n    .then(data => {\n      if (!data.results.length) {\n        iziToast.warning({\n          message:\n            'Sorry, this request did not match. Try changing the request parameters.',\n        });\n      }\n\n      refs.list.innerHTML = renderExercises(data.results);\n      renderPagination(data.totalPages, Number(data.page));\n      fadeItems();\n    })\n    .catch(error => {\n      iziToast.error({\n        message: `${error}`,\n      });\n    });\n}\n\nexport { rerender, rerenderExercises };\n","import { refs } from './constants';\n\nconst header = document.querySelector('.header');\nconst linkHomePage = document.querySelector('[data-home]');\nconst linkFavoritesPage = document.querySelector('[data-favorites]');\nlet isScrolled = false;\n\nwindow.addEventListener('scroll', () => {\n  const scrollTop = window.scrollY || document.documentElement.scrollTop;\n  const scrollUpEl = document.querySelector('.scroll-up-button-container');\n\n  if (scrollTop >= 2 && !isScrolled) {\n    header.classList.add('header-scrolled');\n    scrollUpEl.classList.remove('visually-hidden');\n    isScrolled = true;\n  } else if (scrollTop < 2 && isScrolled) {\n    scrollUpEl.classList.add('visually-hidden');\n    header.classList.remove('header-scrolled');\n    isScrolled = false;\n  }\n});\n\n(function setActiveTab() {\n  const currentURL = window.location.href;\n  if (currentURL.includes('favorites.html')) {\n    linkHomePage.classList.remove('active');\n    linkFavoritesPage.classList.add('active');\n  } else {\n    linkHomePage.classList.add('active');\n    linkFavoritesPage.classList.remove('active');\n  }\n})();\n\nfunction setExerciseHeader(name) {\n  refs.exerciseHeader.textContent = 'Exercises /';\n  refs.exerciseHeaderSpan.textContent = `${name}`;\n  refs.exerciseHeaderSpan.dataset.exercise = name;\n}\n\nfunction resetExerciseHeader() {\n  refs.exerciseHeader.textContent = 'Exercises';\n  refs.exerciseHeaderSpan.textContent = '';\n  refs.exerciseHeaderSpan.dataset.exercise = '';\n}\n\nexport { setExerciseHeader, resetExerciseHeader };\n","const exerciseDataPropertiesMapping = {\n  target: 'Target',\n  bodyPart: 'Body Part',\n  equipment: 'Equipment',\n  popularity: 'Popular',\n};\n\nfunction createExerciseDataMarkup(exercise) {\n  let markup = '';\n\n  Object.keys(exerciseDataPropertiesMapping).forEach(key => {\n    if (exercise.hasOwnProperty(key)) {\n      markup += `\n        <li class=\"exercise-data-list-item\">\n          <p class=\"exercise-data-parameter-name\">${exerciseDataPropertiesMapping[key]}</p>\n          <p class=\"exercise-data-parameter-value\">${exercise[key]}</p>\n        </li>\n      `;\n    }\n  });\n\n  if (exercise.hasOwnProperty('burnedCalories')) {\n    markup += `\n        <li class=\"exercise-data-list-item\">\n          <p class=\"exercise-data-parameter-name\">Burned Calories</p>\n          <p class=\"exercise-data-parameter-value\">${exercise.burnedCalories}/${exercise.time} min</p>\n        </li>\n      `;\n  }\n\n  return markup;\n}\n\nfunction createRatingStarsMarkup(rating) {\n  const fullStar = `\n    <div class=\"rating-star-container\">\n      <svg class=\"rating-star rating-star--active\">\n        <use href=\"./images/icons.svg#icon-star\"></use>\n      </svg>\n    </div>`;\n\n  const emptyStar = `\n    <div class=\"rating-star-container\">\n      <svg class=\"rating-star\">\n        <use href=\"./images/icons.svg#icon-star\"></use>\n      </svg>\n    </div>`;\n\n  const partialStarTemplate = percentage => `\n    <div class=\"rating-star-container\">\n      <svg class=\"rating-star\">\n        <defs>\n          <linearGradient id=\"partial-star-${percentage}\">\n            <stop offset=\"${percentage}%\" stop-color=\"var(--yellow)\" />\n            <stop offset=\"${percentage}%\" stop-color=\"var(--light-20)\" />\n          </linearGradient>\n        </defs>\n        <use href=\"./images/icons.svg#icon-star\" style=\"fill: url(#partial-star-${percentage});\"></use>\n      </svg>\n    </div>`;\n\n  let ratingRemain = rating;\n\n  let starsMarkup = '';\n  for (let i = 0; i < 5; i++) {\n    if (ratingRemain >= 1) {\n      starsMarkup += fullStar;\n    } else if (ratingRemain > 0) {\n      starsMarkup += partialStarTemplate(ratingRemain * 100);\n    } else {\n      starsMarkup += emptyStar;\n    }\n    ratingRemain--;\n  }\n\n  return `\n    <div class=\"rating rating--dark\">\n      <span class=\"rating-label\">${Number.isInteger(rating) ? rating.toFixed(1) : rating}</span>\n      ${starsMarkup}\n    </div>`;\n}\n\nfunction isExerciseInFavoritesList(exerciseID) {\n  let favorites = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  return favorites.some(fav => fav._id === exerciseID);\n}\n\nfunction createFavoritesButtonMarkup(exerciseID) {\n  if (!isExerciseInFavoritesList(exerciseID)) {\n    return `\n    <button class=\"button popup-btn\" id=\"add-favorites\">\n      <span class=\"button-label\">Add to favorites</span>\n        <svg class=\"button-icon icon\" width=\"18\" height=\"18\">\n          <use href=\"./images/icons.svg#icon-heart\"></use>\n        </svg>\n    </button>\n    `;\n  } else {\n    return `\n    <button class=\"button popup-btn\" id=\"remove-favorites\">\n      <span class=\"button-label\">Remove from favorites</span>\n        <svg class=\"button-icon icon\" width=\"18\" height=\"18\">\n          <use href=\"./images/icons.svg#icon-trash\"></use>\n        </svg>\n    </button>\n    `;\n  }\n}\n\nexport function createExerciseMarkup(exercise) {\n  const exerciseDataMarkup = createExerciseDataMarkup(exercise);\n  const ratingStarsMarkup = createRatingStarsMarkup(exercise.rating);\n  const favoritesButtonMarkup = createFavoritesButtonMarkup(exercise._id);\n\n  const markup = `\n    <img class=\"exercise-instruction-image\" src=\"${exercise.gifUrl}\" alt=\"${exercise.name} instruction\">\n    <div class=\"exercise-panel-content\">\n    <p class=\"exercise-name\">${exercise.name}</p>\n    <div class=\"exercise-rating-wrapper\">\n    <div class=\"dark-container\">\n      <div class=\"sub-container\">\n      ${ratingStarsMarkup}\n      </div>\n    </div>\n    </div>\n    <ul class=\"exercise-data\">${exerciseDataMarkup}</ul>\n    <p class=\"exercise-description\">${exercise.description}</p>\n\n    <div class=\"button-container\">\n      ${favoritesButtonMarkup}\n      <button class=\"button button--secondary popup-btn js-add-rating\">\n        <span class=\"button-label\">Give a rating</span>\n      </button>\n    </div>\n\n    </div>\n  `;\n\n  return markup;\n}\n","import iziToast from 'izitoast';\n\nexport function removeExerciseFromFavorites(exerciseID) {\n  let data = getFavoritesData();\n  const exercise = data.find(e => e._id === exerciseID);\n  if (!exercise) return false;\n  const updatedFavorites = data.filter(e => e._id !== exerciseID);\n  localStorage.setItem('favorites', JSON.stringify(updatedFavorites));\n  iziToast.success({\n    message: `Exercise ${exercise.name} removed from favorites!`,\n  });\n  return true;\n}\n\nexport function getFavoritesData() {\n  // 1. Retrieve the data from localStorage\n  const retrievedData = localStorage.getItem('favorites');\n  // 2. Convert the retrieved data back to an array\n  return JSON.parse(retrievedData) || [];\n}","import throttle from 'lodash.throttle';\nimport { fadeItems } from './rerender.js';\nimport { renderExercises } from './renderExercises.js';\nimport { onExerciseStartClick } from './eventHandlers.js';\nimport {\n  getFavoritesData,\n  removeExerciseFromFavorites,\n} from './favoritesStorageHandler.js';\nimport { createPaginationItem } from './renderPagination.js';\n\nlet localData = [];\nconst noCardsTextRef = document.querySelector('.favorites-text');\nconst favoritesListRef = document.querySelector('.practice-list');\nconst paginationElement = document.querySelector('.js-pagination');\n\nfunction splitHandler(arr, widthVP) {\n  const splitter = widthVP < 768 ? 8 : 10;\n  let result = [];\n  for (let i = 0; i < arr.length; i += splitter) {\n    result.push(arr.slice(i, i + splitter));\n  }\n  return result;\n}\n\nfunction onExerciseRemoveClick(e) {\n  const target = e.target.closest('.exercise-remove-btn');\n  if (!target) return;\n  const exerciseID = target.getAttribute('data-exercise-id');\n  if (exerciseID) {\n    if (removeExerciseFromFavorites(exerciseID)) {\n      resizerHandler(getFavoritesData());\n    }\n  }\n}\n\nfunction itemHandler(arr) {\n  favoritesListRef.innerHTML = renderExercises(arr, true);\n  fadeItems();\n}\n\nfunction updatePagination(pages, currentPage) {\n  paginationElement.innerHTML = '';\n  paginationElement.classList.remove('visually-hidden');\n  pages.forEach((page, index) => {\n    const pageItem = createPaginationItem({\n      pageId: index,\n      content: index + 1,\n      liClassNames: ['pagination-item', currentPage === index ? 'active' : ''],\n    });\n    pageItem.addEventListener('click', () => {\n      itemHandler(page);\n      updatePagination(pages, index);\n      favoritesListRef.scrollIntoView({ behavior: 'smooth' });\n    });\n    paginationElement.appendChild(pageItem);\n  });\n}\n\nexport function resizerHandler(data = localData) {\n  if (!data.length) {\n    noCardsTextRef.classList.remove('visually-hidden');\n    return;\n  } else {\n    noCardsTextRef.classList.add('visually-hidden');\n  }\n\n  const widthVP = window.innerWidth;\n  paginationElement.classList.add('hidden');\n  let itemsPerPage = widthVP < 768 ? 8 : 10;\n\n  if (widthVP >= 1440) {\n    itemsPerPage = 10;\n  }\n\n  if (data.length <= itemsPerPage) {\n    itemHandler(data);\n  } else {\n    const pages = splitHandler(data, widthVP);\n    itemHandler(pages[0]);\n    updatePagination(pages, 0);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (window.location.pathname.includes('favorites.html')) {\n    localData = getFavoritesData();\n    // Initial run\n    resizerHandler(localData);\n    const throttledHandleResize = throttle(() => resizerHandler(localData), 50);\n    // Throttle the resizerHandler function\n    window.addEventListener('resize', throttledHandleResize);\n    favoritesListRef.addEventListener('click', onExerciseStartClick);\n    favoritesListRef.addEventListener('click', onExerciseRemoveClick);\n  }\n});\n","import { createExerciseMarkup } from './exercisePopUpMarkup.js';\nimport { serviceGetExercisesById } from './services.js';\nimport { refs } from './constants.js';\nimport iziToast from 'izitoast';\nimport { getFavoritesData, removeExerciseFromFavorites } from './favoritesStorageHandler.js';\nimport { resizerHandler } from './favorites.js';\n\nlet exercisePopupAddFavoritesBtn = null;\nlet exercisePopupRemoveFavoritesBtn = null;\n\nexport function openExercisePopUp(exerciseID) {\n  renderExercisePopUp(exerciseID)\n    .then(exercise => {\n      exercisePopupAddFavoritesBtn = document.querySelector('#add-favorites');\n      exercisePopupRemoveFavoritesBtn = document.querySelector('#remove-favorites');\n\n      if (exercisePopupAddFavoritesBtn) {\n        exercisePopupAddFavoritesBtn.dataset.exercise = JSON.stringify(exercise);\n        exercisePopupAddFavoritesBtn.addEventListener('click', handleAddToFavorites, { passive: true });\n      }\n\n      if (exercisePopupRemoveFavoritesBtn) {\n        exercisePopupRemoveFavoritesBtn.dataset.exercise = JSON.stringify(exercise);\n        exercisePopupRemoveFavoritesBtn.addEventListener('click', handleRemoveFromFavorites, { passive: true });\n      }\n\n      refs.exercisePopUpCloseBtn.addEventListener('click', closeExercisePopUp, { passive: true });\n      refs.exercisePopUpBackdrop.addEventListener('click', handleBackdropClick, { passive: true });\n\n      refs.exercisePopUpBackdrop.classList.add('is-open');\n      refs.body.classList.add('overflow-hidden');\n\n      document.addEventListener('keydown', handleESCClick);\n    })\n    .catch(error => {\n      iziToast.error({ message: `${error}` });\n    });\n}\n\nfunction closeExercisePopUp() {\n  refs.exercisePopUpBackdrop.classList.remove('is-open');\n  refs.body.classList.remove('overflow-hidden');\n\n  if (exercisePopupAddFavoritesBtn) {\n    exercisePopupAddFavoritesBtn.removeEventListener('click', handleAddToFavorites);\n  }\n\n  if (exercisePopupRemoveFavoritesBtn) {\n    exercisePopupRemoveFavoritesBtn.removeEventListener('click', handleRemoveFromFavorites);\n  }\n\n  refs.exercisePopUpBackdrop.removeEventListener('click', handleBackdropClick);\n  refs.exercisePopUpCloseBtn.removeEventListener('click', closeExercisePopUp);\n  document.removeEventListener('keydown', handleESCClick);\n\n  exercisePopupAddFavoritesBtn = null;\n  exercisePopupRemoveFavoritesBtn = null;\n}\n\nfunction renderExercisePopUp(exerciseID) {\n  return new Promise((resolve, reject) => {\n    serviceGetExercisesById(exerciseID)\n      .then(data => {\n        refs.exercisePopUpContent.innerHTML = createExerciseMarkup(data);\n        resolve(data); // Resolve with exercise data\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === refs.exercisePopUpBackdrop) {\n    closeExercisePopUp();\n  }\n}\n\nfunction addExerciseToFavorites(exercise) {\n  let favorites = getFavoritesData();\n  favorites.push(exercise);\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n  if (window.location.pathname.includes('favorites.html')) {\n    resizerHandler(favorites);\n  }\n  iziToast.success({ message: 'Exercise added to favorites!' });\n}\n\nfunction handleAddToFavorites(event) {\n  const exercise = JSON.parse(exercisePopupAddFavoritesBtn.dataset.exercise);\n  addExerciseToFavorites(exercise);\n  event.stopPropagation();\n  openExercisePopUp(exercise._id);\n}\n\nfunction handleRemoveFromFavorites(event) {\n  const exercise = JSON.parse(exercisePopupRemoveFavoritesBtn.dataset.exercise);\n  const isRemoved = removeExerciseFromFavorites(exercise._id);\n  if (isRemoved && window.location.pathname.includes('favorites.html')) {\n    resizerHandler(getFavoritesData());\n  }\n  openExercisePopUp(exercise._id);\n  event.stopPropagation();\n}\n\nfunction handleESCClick(e) {\n  if (e.code === 'Escape') {\n    closeExercisePopUp();\n  }\n}\n","import {\n  queryParamsFilters,\n  queryParamsExercises,\n  FILTERS,\n  refs,\n} from './constants';\nimport { rerender, rerenderExercises } from './rerender';\nimport { resetExerciseHeader, setExerciseHeader } from './header';\nimport { openExercisePopUp } from './exercisePopUp.js';\n\nfunction onPaginationClick(e) {\n  const target = e.target;\n  const paginationItem =\n    target.closest('li.pagination-item:not(.active):not(.three-dots)') ??\n    target.closest('li.pagination-arrow:not(.disabled)');\n\n  if (!paginationItem) return;\n\n  const page = Number(paginationItem.dataset.id);\n  queryParamsFilters.set('page', page);\n  queryParamsExercises.set('page', page);\n\n  if (refs.exerciseHeaderSpan.dataset.exercise) {\n    rerenderExercises();\n  } else {\n    rerender();\n  }\n\n  refs.mainSection.scrollIntoView();\n}\n\nfunction onFilterClick(e) {\n  const target = e.target;\n  const listItem = target.closest('li[data-filter]');\n\n  if (!listItem) return;\n\n  const activeItems = document.querySelectorAll('.js-filters .active');\n  activeItems.forEach(item => item.classList.remove('active'));\n\n  listItem.classList.add('active');\n  refs.searchForm.reset();\n  refs.searchForm.classList.add('hidden');\n\n  const filter = listItem.dataset.filter;\n  const filterKey = Object.keys(FILTERS).find(key => FILTERS[key] === filter);\n\n  if (filterKey) {\n    queryParamsFilters.set('filter', FILTERS[filterKey]);\n    queryParamsFilters.set('page', 1);\n\n    queryParamsExercises.delete('muscles');\n    queryParamsExercises.delete('bodypart');\n    queryParamsExercises.delete('equipment');\n    queryParamsExercises.set('page', 1);\n\n    refs.list.classList.replace('exercise-list', 'filtered-list');\n\n    rerender();\n  }\n  resetExerciseHeader();\n}\n\nfunction onExerciseClick(e) {\n  const target = e.target;\n  const exerciseItem = target.closest('li.category-card');\n  if (!exerciseItem) return;\n  let exerciseFilter = exerciseItem.dataset.filter.toString().toLowerCase();\n  if (exerciseFilter === 'body parts') {\n    exerciseFilter = 'bodypart';\n  }\n  const exerciseName = exerciseItem.dataset.name;\n\n  setExerciseHeader(exerciseName);\n\n  queryParamsExercises.set(exerciseFilter, exerciseName);\n  queryParamsExercises.set('page', 1);\n\n  refs.list.classList.replace('filtered-list', 'exercise-list');\n  refs.searchForm.classList.remove('hidden');\n\n  refs.list.innerHTML = '';\n  rerenderExercises();\n  refs.mainSection.scrollIntoView();\n}\n\nfunction onSearchFormSubmit(e) {\n  e.preventDefault();\n\n  const keyword = refs.searchInput.value.trim();\n  queryParamsExercises.set('keyword', keyword);\n\n  rerenderExercises();\n}\n\nfunction onExerciseStartClick(e) {\n  const target = e.target.closest('.exercise-start-btn');\n\n  if (!target) return;\n\n  const exerciseID = target.getAttribute('data-exercise-id');\n  if (exerciseID) {\n    openExercisePopUp(exerciseID);\n  }\n}\n\nexport {\n  onPaginationClick,\n  onFilterClick,\n  onExerciseClick,\n  onSearchFormSubmit,\n  onExerciseStartClick,\n};\n"],"names":["BASE_URL","refs","FILTERS","queryParamsFilters","queryParamsExercises","requestOptionsGET","serviceGetExercises","res","servicePatchExercisesByIdRating","id","rate","email","review","requestOptionsPatch","data","serviceGetExercisesById","serviceGetFilters","serviceGetQuote","servicePostSubscription","requestOptionsPost","capitalizeFirstLetter","string","renderCategories","arr","markup","filter","name","imgURL","getArrowLeft","className","getRightArrow","createPaginationItem","pageId","content","liClassNames","li","a","event","renderPagination","totalPages","currentPage","fragment","tempArray","goToFirstPageItem","goToPrevPageItem","start","end","_","i","goToNextPageItem","goToLastPageItem","renderExercises","isFavorites","_id","rating","bodyPart","burnedCalories","target","time","fadeItems","items","fadeIn","item","delay","rerender","error","iziToast","rerenderExercises","header","linkHomePage","linkFavoritesPage","isScrolled","scrollTop","scrollUpEl","setExerciseHeader","resetExerciseHeader","exerciseDataPropertiesMapping","createExerciseDataMarkup","exercise","key","createRatingStarsMarkup","fullStar","emptyStar","partialStarTemplate","percentage","ratingRemain","starsMarkup","isExerciseInFavoritesList","exerciseID","fav","createFavoritesButtonMarkup","createExerciseMarkup","exerciseDataMarkup","ratingStarsMarkup","favoritesButtonMarkup","removeExerciseFromFavorites","getFavoritesData","e","updatedFavorites","retrievedData","localData","noCardsTextRef","favoritesListRef","paginationElement","splitHandler","widthVP","splitter","result","onExerciseRemoveClick","resizerHandler","itemHandler","updatePagination","pages","page","index","pageItem","itemsPerPage","throttledHandleResize","throttle","onExerciseStartClick","exercisePopupAddFavoritesBtn","exercisePopupRemoveFavoritesBtn","openExercisePopUp","renderExercisePopUp","handleAddToFavorites","handleRemoveFromFavorites","closeExercisePopUp","handleBackdropClick","handleESCClick","resolve","reject","addExerciseToFavorites","favorites","onPaginationClick","paginationItem","onFilterClick","listItem","filterKey","onExerciseClick","exerciseItem","exerciseFilter","exerciseName","onSearchFormSubmit","keyword"],"mappings":"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"}