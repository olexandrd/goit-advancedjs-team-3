{"version":3,"file":"ratingPopup-16d6aebb.js","sources":["../../src/js/mobile_menu.js","../../src/js/quote.js","../../src/js/scroll-up.js","../../src/js/ratingPopup.js"],"sourcesContent":["import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\nconst mobileMenu = document.querySelector('.js-menu-container');\nconst openMenuBtn = document.querySelector('.js-open-menu');\nconst closeMenuBtn = document.querySelector('.js-close-menu');\nconst menuLinks = document.querySelectorAll('.mobile-menu-link');\n\nconst toggleMenu = () => {\n  const isMenuOpen =\n    openMenuBtn.getAttribute('aria-expanded') === 'true' || false;\n  openMenuBtn.setAttribute('aria-expanded', !isMenuOpen);\n  mobileMenu.classList.toggle('is-open');\n\n  if (!isMenuOpen) {\n    disableBodyScroll(document.body);\n    document.addEventListener('keydown', onEscKeyPress);\n    mobileMenu.addEventListener('click', onBackdropClick);\n  } else {\n    enableBodyScroll(document.body);\n    document.removeEventListener('keydown', onEscKeyPress);\n    mobileMenu.removeEventListener('click', onBackdropClick);\n  }\n};\n\nconst onEscKeyPress = e => {\n  if (e.key === 'Escape') {\n    toggleMenu();\n  }\n};\n\nconst onBackdropClick = e => {\n  if (e.target === mobileMenu) {\n    toggleMenu();\n  }\n};\n\nopenMenuBtn.addEventListener('click', toggleMenu);\ncloseMenuBtn.addEventListener('click', toggleMenu);\nmenuLinks.forEach(link => {\n  link.addEventListener('click', toggleMenu);\n});\n\n// Close the mobile menu on wider screens if the device orientation changes\nwindow.matchMedia('(min-width: 768px)').addEventListener('change', e => {\n  if (!e.matches) return;\n  mobileMenu.classList.remove('is-open');\n  openMenuBtn.setAttribute('aria-expanded', false);\n  enableBodyScroll(document.body);\n  document.removeEventListener('keydown', onEscKeyPress);\n  mobileMenu.removeEventListener('click', onBackdropClick);\n});\n\nexport {};\n","import { serviceGetQuote } from './services';\n\n(async () => {\n  const quoteElement = document.getElementById('quote');\n\n  if (!quoteElement) {\n    return;\n  }\n\n  let quoteData;\n\n  const dataFromStorage = localStorage.getItem('quote');\n  if (dataFromStorage) {\n    quoteData = JSON.parse(dataFromStorage);\n\n    if (Date.now() - quoteData.timestamp > 1000 * 60 * 60 * 24) {\n      quoteData = null;\n    }\n  }\n\n  if (!quoteData) {\n    try {\n      quoteData = await serviceGetQuote();\n      localStorage.setItem(\n        'quote',\n        JSON.stringify({ ...quoteData, timestamp: Date.now() })\n      );\n    } catch {\n      quoteData = null;\n    }\n  }\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteDescriptionElement =\n    quoteElement.querySelector('.quote-description');\n  const quoteAuthorElement = quoteElement.querySelector('.quote-author');\n\n  quoteDescriptionElement.textContent = quoteData.quote;\n  quoteAuthorElement.textContent = quoteData.author;\n\n  quoteElement.classList.remove('hidden');\n})();\n\nexport {};\n","import { refs } from './constants';\n\nrefs.scrollUpButton.addEventListener('click', () => {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n});\n\nexport {};\n","import iziToast from 'izitoast';\nimport { refs } from './constants';\nimport { servicePatchExercisesByIdRating } from './services';\n\nlet activeRating = 0;\nlet exerciseId;\n\nfunction onRatingFormSubmit(e) {\n  e.preventDefault();\n\n  if (activeRating && exerciseId) {\n    servicePatchExercisesByIdRating(exerciseId, {\n      rate: Number(activeRating),\n      email: refs.ratingForm.elements.email.value,\n      review: refs.ratingForm.elements.comment.value,\n    })\n      .then(() => {\n        closeRatingPopUp();\n        iziToast.success({\n          message: 'Thanks for rating!',\n        });\n        refs.ratingForm.reset();\n        activeRating = 0;\n      })\n      .catch(error => {\n        iziToast.error({\n          message: error.message,\n        });\n      });\n  } else {\n    iziToast.warning({\n      message: 'Please select rating',\n    });\n  }\n}\n\nfunction onStarClick(e) {\n  const currentStar = e.target.closest('.rating-star-container');\n  if (currentStar) {\n    const stars = document.querySelectorAll('.js-rating-star');\n\n    activeRating = currentStar.dataset.id;\n    document.querySelector('.js-rating-label').textContent =\n      Number(activeRating).toFixed(1);\n\n    for (let i = 0; i < activeRating; i++) {\n      stars[i].classList.add('rating-star--active');\n    }\n\n    for (let i = activeRating; i < 5; i++) {\n      stars[i].classList.remove('rating-star--active');\n    }\n  }\n}\n\nfunction onGiveRatingBtnClick() {\n  exerciseId = JSON.parse(\n    document.querySelector('button[data-exercise]').dataset.exercise\n  )._id;\n  refs.exercisePopUpBackdrop.classList.remove('is-open');\n  refs.exercisePopUpBackdrop.style.display = 'none';\n  refs.ratingPopUpBackdrop.classList.add('is-open');\n\n  refs.ratingPopUpContent.innerHTML = createRatingMarkup();\n\n  addRatingPopupListeners();\n}\n\nfunction closeRatingPopUp() {\n  refs.ratingPopUpBackdrop.classList.remove('is-open');\n  refs.exercisePopUpBackdrop.style.display = 'flex';\n  refs.exercisePopUpBackdrop.classList.add('is-open');\n\n  removeRatingPopupListeners();\n}\n\nfunction createRatingStarsMarkup() {\n  let starsMarkup = '';\n\n  for (let i = 0; i < 5; i++) {\n    starsMarkup += `\n    <div class=\"rating-star-container\" data-id=\"${i + 1}\">\n      <svg class=\"rating-star js-rating-star\">\n        <use href=\"./images/icons.svg#icon-star\"></use>\n      </svg>\n    </div>`;\n  }\n\n  return `\n    <div class=\"rating rating--dark\">\n      <span class=\"rating-label js-rating-label\">0.0</span>\n        ${starsMarkup}\n      </div>`;\n}\n\nfunction createRatingMarkup() {\n  const ratingStarsMarkup = createRatingStarsMarkup();\n\n  const markup = `\n    <p class=\"rating-data-parameter-name\">Rating</p>\n    <div class=\"rating-rating-wrapper\">\n    <div class=\"dark-container\">\n      <div class=\"sub-container\">\n      ${ratingStarsMarkup}\n      </div>\n    </div>\n    </div>\n  `;\n\n  return markup;\n}\n\nfunction addRatingPopupListeners() {\n  refs.ratingPopUpCloseBtn.addEventListener('click', closeRatingPopUp);\n  refs.ratingPopUpContent.addEventListener('click', onStarClick);\n  refs.ratingForm.addEventListener('submit', onRatingFormSubmit);\n}\n\nfunction removeRatingPopupListeners() {\n  refs.ratingPopUpCloseBtn.removeEventListener('click', closeRatingPopUp);\n  refs.ratingPopUpContent.removeEventListener('click', onStarClick);\n  refs.ratingForm.removeEventListener('submit', onRatingFormSubmit);\n}\n\n// Function to check if the button exists and add the event listener\nfunction checkForButton() {\n  const button = document.querySelector('.js-add-rating');\n  if (button) {\n    button.addEventListener('click', onGiveRatingBtnClick);\n    return true;\n  }\n  return false;\n}\n\n// MutationObserver to monitor DOM changes and check for the button\nconst observer = new MutationObserver(mutations => {\n  mutations.forEach(mutation => {\n    if (mutation.type === 'childList' || mutation.type === 'subtree') {\n      checkForButton();\n    }\n  });\n});\n\n// Start observing the entire document\nobserver.observe(document, {\n  childList: true,\n  subtree: true,\n});\n\n// Initial check in case the button is already present\ncheckForButton();\n"],"names":["mobileMenu","openMenuBtn","closeMenuBtn","menuLinks","toggleMenu","isMenuOpen","enableBodyScroll","onEscKeyPress","onBackdropClick","disableBodyScroll","link","quoteElement","quoteData","dataFromStorage","serviceGetQuote","quoteDescriptionElement","quoteAuthorElement","refs","activeRating","exerciseId","onRatingFormSubmit","servicePatchExercisesByIdRating","closeRatingPopUp","iziToast","error","onStarClick","currentStar","stars","i","onGiveRatingBtnClick","createRatingMarkup","addRatingPopupListeners","removeRatingPopupListeners","createRatingStarsMarkup","starsMarkup","checkForButton","button","observer","mutations","mutation"],"mappings":"qHAEA,MAAMA,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAY,SAAS,iBAAiB,mBAAmB,EAEzDC,EAAa,IAAM,CACvB,MAAMC,EACJJ,EAAY,aAAa,eAAe,IAAM,QAAU,GAC1DA,EAAY,aAAa,gBAAiB,CAACI,CAAU,EACrDL,EAAW,UAAU,OAAO,SAAS,EAEhCK,GAKHC,EAAiB,SAAS,IAAI,EAC9B,SAAS,oBAAoB,UAAWC,CAAa,EACrDP,EAAW,oBAAoB,QAASQ,CAAe,IANvDC,EAAkB,SAAS,IAAI,EAC/B,SAAS,iBAAiB,UAAWF,CAAa,EAClDP,EAAW,iBAAiB,QAASQ,CAAe,EAMxD,EAEMD,EAAgB,GAAK,CACrB,EAAE,MAAQ,UACZH,GAEJ,EAEMI,EAAkB,GAAK,CACvB,EAAE,SAAWR,GACfI,GAEJ,EAEAH,EAAY,iBAAiB,QAASG,CAAU,EAChDF,EAAa,iBAAiB,QAASE,CAAU,EACjDD,EAAU,QAAQO,GAAQ,CACxBA,EAAK,iBAAiB,QAASN,CAAU,CAC3C,CAAC,EAGD,OAAO,WAAW,oBAAoB,EAAE,iBAAiB,SAAU,GAAK,CACjE,EAAE,UACPJ,EAAW,UAAU,OAAO,SAAS,EACrCC,EAAY,aAAa,gBAAiB,EAAK,EAC/CK,EAAiB,SAAS,IAAI,EAC9B,SAAS,oBAAoB,UAAWC,CAAa,EACrDP,EAAW,oBAAoB,QAASQ,CAAe,EACzD,CAAC,GChDA,SAAY,CACX,MAAMG,EAAe,SAAS,eAAe,OAAO,EAEpD,GAAI,CAACA,EACH,OAGF,IAAIC,EAEJ,MAAMC,EAAkB,aAAa,QAAQ,OAAO,EASpD,GARIA,IACFD,EAAY,KAAK,MAAMC,CAAe,EAElC,KAAK,IAAG,EAAKD,EAAU,UAAY,IAAO,GAAK,GAAK,KACtDA,EAAY,OAIZ,CAACA,EACH,GAAI,CACFA,EAAY,MAAME,IAClB,aAAa,QACX,QACA,KAAK,UAAU,CAAE,GAAGF,EAAW,UAAW,KAAK,IAAG,EAAI,CAC9D,CACA,MAAY,CACNA,EAAY,IACb,CAGH,GAAI,CAACA,EACH,OAGF,MAAMG,EACJJ,EAAa,cAAc,oBAAoB,EAC3CK,EAAqBL,EAAa,cAAc,eAAe,EAErEI,EAAwB,YAAcH,EAAU,MAChDI,EAAmB,YAAcJ,EAAU,OAE3CD,EAAa,UAAU,OAAO,QAAQ,CACxC,GAAI,EC1CJM,EAAK,eAAe,iBAAiB,QAAS,IAAM,CAClD,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAQ,CAAE,CAChD,CAAC,ECAD,IAAIC,EAAe,EACfC,EAEJ,SAASC,EAAmB,EAAG,CAC7B,EAAE,eAAc,EAEZF,GAAgBC,EAClBE,EAAgCF,EAAY,CAC1C,KAAM,OAAOD,CAAY,EACzB,MAAOD,EAAK,WAAW,SAAS,MAAM,MACtC,OAAQA,EAAK,WAAW,SAAS,QAAQ,KAC/C,CAAK,EACE,KAAK,IAAM,CACVK,IACAC,EAAS,QAAQ,CACf,QAAS,oBACnB,CAAS,EACDN,EAAK,WAAW,QAChBC,EAAe,CACvB,CAAO,EACA,MAAMM,GAAS,CACdD,EAAS,MAAM,CACb,QAASC,EAAM,OACzB,CAAS,CACT,CAAO,EAEHD,EAAS,QAAQ,CACf,QAAS,sBACf,CAAK,CAEL,CAEA,SAASE,EAAY,EAAG,CACtB,MAAMC,EAAc,EAAE,OAAO,QAAQ,wBAAwB,EAC7D,GAAIA,EAAa,CACf,MAAMC,EAAQ,SAAS,iBAAiB,iBAAiB,EAEzDT,EAAeQ,EAAY,QAAQ,GACnC,SAAS,cAAc,kBAAkB,EAAE,YACzC,OAAOR,CAAY,EAAE,QAAQ,CAAC,EAEhC,QAASU,EAAI,EAAGA,EAAIV,EAAcU,IAChCD,EAAMC,CAAC,EAAE,UAAU,IAAI,qBAAqB,EAG9C,QAASA,EAAIV,EAAcU,EAAI,EAAGA,IAChCD,EAAMC,CAAC,EAAE,UAAU,OAAO,qBAAqB,CAElD,CACH,CAEA,SAASC,GAAuB,CAC9BV,EAAa,KAAK,MAChB,SAAS,cAAc,uBAAuB,EAAE,QAAQ,QACzD,EAAC,IACFF,EAAK,sBAAsB,UAAU,OAAO,SAAS,EACrDA,EAAK,sBAAsB,MAAM,QAAU,OAC3CA,EAAK,oBAAoB,UAAU,IAAI,SAAS,EAEhDA,EAAK,mBAAmB,UAAYa,IAEpCC,GACF,CAEA,SAAST,GAAmB,CAC1BL,EAAK,oBAAoB,UAAU,OAAO,SAAS,EACnDA,EAAK,sBAAsB,MAAM,QAAU,OAC3CA,EAAK,sBAAsB,UAAU,IAAI,SAAS,EAElDe,GACF,CAEA,SAASC,GAA0B,CACjC,IAAIC,EAAc,GAElB,QAASN,EAAI,EAAGA,EAAI,EAAGA,IACrBM,GAAe;AAAA,kDAC+BN,EAAI,CAAC;AAAA;AAAA;AAAA;AAAA,YAOrD,MAAO;AAAA;AAAA;AAAA,UAGCM,CAAW;AAAA,aAErB,CAEA,SAASJ,GAAqB,CAc5B,MAXe;AAAA;AAAA;AAAA;AAAA;AAAA,QAFWG,GAOH;AAAA;AAAA;AAAA;AAAA,GAOzB,CAEA,SAASF,GAA0B,CACjCd,EAAK,oBAAoB,iBAAiB,QAASK,CAAgB,EACnEL,EAAK,mBAAmB,iBAAiB,QAASQ,CAAW,EAC7DR,EAAK,WAAW,iBAAiB,SAAUG,CAAkB,CAC/D,CAEA,SAASY,GAA6B,CACpCf,EAAK,oBAAoB,oBAAoB,QAASK,CAAgB,EACtEL,EAAK,mBAAmB,oBAAoB,QAASQ,CAAW,EAChER,EAAK,WAAW,oBAAoB,SAAUG,CAAkB,CAClE,CAGA,SAASe,GAAiB,CACxB,MAAMC,EAAS,SAAS,cAAc,gBAAgB,EACtD,OAAIA,GACFA,EAAO,iBAAiB,QAASP,CAAoB,EAC9C,IAEF,EACT,CAGA,MAAMQ,EAAW,IAAI,iBAAiBC,GAAa,CACjDA,EAAU,QAAQC,GAAY,EACxBA,EAAS,OAAS,aAAeA,EAAS,OAAS,YACrDJ,GAEN,CAAG,CACH,CAAC,EAGDE,EAAS,QAAQ,SAAU,CACzB,UAAW,GACX,QAAS,EACX,CAAC,EAGDF,EAAgB"}